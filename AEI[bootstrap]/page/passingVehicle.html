<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>通过车统计</title>
    <link rel="stylesheet" href="../plugins/element-ui/element-ui.css">
    <script src="../plugins/vue/vue.js"></script>
    <script src="../plugins/element-ui/element-ui.js"></script>
    <link rel="stylesheet" href="../css/plugins/animate/animate.css">
    <style>
        .el-form--inline .el-form-item__content {
            width: auto;
        }
    </style>
</head>
<body>
<div class="animated fadeInUp" id="v-main">
    <el-form :inline="true" :model="condition" class="demo-form-inline" size="small">
        <el-row>
            <el-col :span="24">
                <el-form-item label-width="90px" label="查询模式">
                    <el-radio-group v-model="pattern">
                        <el-radio label="1">自选模式</el-radio>
                        <el-radio label="2">标准模式</el-radio>
                    </el-radio-group>
                </el-form-item>
                <el-form-item label-width="90px" label="运行方向">
                    <el-select v-model="condition.field02" placeholder="运行方向">
                        <el-option label="全选" value=""></el-option>
                        <el-option v-for="(item,idx) in aeiCode" :label="item.label" :key="idx"
                                   :value="item.value"></el-option>
                    </el-select>
                </el-form-item>
                <el-form-item>
                    <el-button type="primary" @click="onSubmit">查询</el-button>
                </el-form-item>
            </el-col>
            <el-col :span="24" v-if="pattern === '1'">
                <el-form-item label-width="90px" label="开始时间">
                    <el-date-picker v-model="condition.startTime" type="datetime" placeholder="选择日期时间">
                    </el-date-picker>
                </el-form-item>
                <el-form-item label-width="90px" label="结束时间">
                    <el-date-picker v-model="condition.endTime" type="datetime"
                                    placeholder="选择日期时间">
                    </el-date-picker>
                </el-form-item>
            </el-col>
            <el-col :span="24" v-else-if="pattern === '2'">
                <el-form-item label-width="90px" label="统计类型">
                    <el-radio-group v-model="condition.sortType">
                        <el-radio label="day">日报表</el-radio>
                        <el-radio label="week">周报表</el-radio>
                        <el-radio label="month">月报表</el-radio>
                        <el-radio label="quarter">季报表</el-radio>
                        <el-radio label="year">年报表</el-radio>
                    </el-radio-group>
                </el-form-item>
                <el-form-item label-width="90px" label="时间范围">
                    <el-date-picker v-model="condition.startTime" type="datetime" placeholder="选择日期时间">
                    </el-date-picker>
                </el-form-item>
            </el-col>
        </el-row>
    </el-form>
    <el-table :data="tableData" :span-method="objectSpanMethod" border stripe style="width: 100%">
        <el-table-column prop="field01" label="车辆段" align="center"></el-table-column>
        <el-table-column prop="field02" label="车站" align="center"></el-table-column>
        <el-table-column prop="field03" label="AEI" align="center"></el-table-column>
        <el-table-column prop="field04" label="总列数" align="center"></el-table-column>
        <el-table-column prop="field05" label="货列数" align="center"></el-table-column>
        <el-table-column prop="field06" label="总辆数" align="center"></el-table-column>
        <el-table-column prop="field07" label="货辆数" align="center"></el-table-column>
        <el-table-column prop="field08" label="标签数" align="center"></el-table-column>
        <el-table-column prop="field09" label="识别率" align="center"></el-table-column>
    </el-table>
</div>
<script>
    new Vue({
        el: '#v-main',
        data: {
            pattern: '1',// 切换查询模式
            aeiCode: [{label: '重庆', value: 'cq'}, {label: '成都', value: 'cd'}],// 运行方向模拟数据
            condition: {// 查询条件字段，根据实际字段绑定到form
                field01: '',
                field02: '',
                field03: '',
                startTime: '',
                endTime: '',
                sortItem: '',
                sortType: ''
            },
            tableData: [{// 列表数据，绑定到虚拟dom
                field01: '焦作',
                field02: '安阳',
                field03: '北头京广下',
                field04: 1,
                field05: 23,
                field06: 20,
                field07: 34,
                field08: 67,
                field09: '32.3%'
            }, {
                field01: '焦作',
                field02: '安阳',
                field03: '北头京广下',
                field04: 2,
                field05: 23,
                field06: 20,
                field07: 34,
                field08: 67,
                field09: '32.3%'
            }, {
                field01: '焦作',
                field02: '安阳',
                field03: '北头京广下',
                field04: 3,
                field05: 23,
                field06: 20,
                field07: 34,
                field08: 67,
                field09: '32.3%'
            }, {
                field01: '焦作',
                field02: '安阳',
                field03: '北头京广下',
                field04: 4,
                field05: 23,
                field06: 20,
                field07: 34,
                field08: 67,
                field09: '32.3%'
            }, {
                field01: '焦作',
                field02: '安阳',
                field03: '北头京广下',
                field04: 5,
                field05: 23,
                field06: 20,
                field07: 34,
                field08: 67,
                field09: '32.3%'
            }, {
                field01: '焦作',
                field02: '长治北',
                field03: '太原方向下',
                field04: 6,
                field05: 23,
                field06: 20,
                field07: 34,
                field08: 67,
                field09: '32.3%'
            }, {
                field01: '焦作',
                field02: '长治北',
                field03: '太原方向下',
                field04: 7,
                field05: 23,
                field06: 20,
                field07: 34,
                field08: 67,
                field09: '32.3%'
            }, {
                field01: '焦作',
                field02: '长治北',
                field03: '太原方向下',
                field04: 8,
                field05: 23,
                field06: 20,
                field07: 34,
                field08: 67,
                field09: '32.3%'
            }, {
                field01: '焦作',
                field02: '长治北',
                field03: '太原方向下',
                field04: 9,
                field05: 23,
                field06: 20,
                field07: 34,
                field08: 67,
                field09: '32.3%'
            }, {
                field01: '焦作',
                field02: '长治北',
                field03: '太原方向下',
                field04: 10,
                field05: 23,
                field06: 20,
                field07: 34,
                field08: 67,
                field09: '32.3%'
            }, {
                field01: '焦作',
                field02: '长子南',
                field03: '长子南局口上行',
                field04: 10,
                field05: 23,
                field06: 20,
                field07: 34,
                field08: 67,
                field09: '32.3%'
            }, {
                field01: '焦作',
                field02: '长子南',
                field03: '长子南局口上行',
                field04: 10,
                field05: 23,
                field06: 20,
                field07: 34,
                field08: 67,
                field09: '32.3%'
            }, {
                field01: '焦作',
                field02: '长子南',
                field03: '长子南局口上行',
                field04: 10,
                field05: 23,
                field06: 20,
                field07: 34,
                field08: 67,
                field09: '32.3%'
            }, {
                field01: '焦作',
                field02: '长子南',
                field03: '长子南局口上行',
                field04: 10,
                field05: 23,
                field06: 20,
                field07: 34,
                field08: 67,
                field09: '32.3%'
            }, {
                field01: '焦作',
                field02: '范县',
                field03: '范县下行',
                field04: 10,
                field05: 23,
                field06: 20,
                field07: 34,
                field08: 67,
                field09: '32.3%'
            }, {
                field01: '焦作',
                field02: '鹤壁时丰',
                field03: '改建汤鹤线上行',
                field04: 10,
                field05: 23,
                field06: 20,
                field07: 34,
                field08: 67,
                field09: '32.3%'
            }, {
                field01: '焦作',
                field02: '鹤壁时丰',
                field03: '改建汤鹤线上行',
                field04: 10,
                field05: 23,
                field06: 20,
                field07: 34,
                field08: 67,
                field09: '32.3%'
            }, {
                field01: '焦作',
                field02: '鹤壁时丰',
                field03: '改建汤鹤线上行',
                field04: 10,
                field05: 23,
                field06: 20,
                field07: 34,
                field08: 67,
                field09: '32.3%'
            }, {
                field01: '焦作',
                field02: '鹤壁时丰',
                field03: '改建汤鹤线上行',
                field04: 10,
                field05: 23,
                field06: 20,
                field07: 34,
                field08: 67,
                field09: '32.3%'
            }, {
                field01: '焦作',
                field02: '段计',
                field04: 19,
                field05: 23,
                field06: 20,
                field07: 34,
                field08: 67,
                field09: '32.3%'
            }, {
                field01: '局计',
                field02: 2,
                field03: 3,
                field04: 20,
                field05: 5,
                field06: 6,
                field07: 7,
                field08: 67,
                field09: '32.3%'
            }]
        },
        watch: {// 测试
            pattern: function (val) {
                console.log('pattern-->', val, this.pattern);
            }
        },
        methods: {
            // 查询
            onSubmit: function () {
                console.log(this.condition);
            },
            // 配置表格合并
            objectSpanMethod: function (tabData) {
                var row = tabData.row, column = tabData.column, rowIndex = tabData.rowIndex,
                    columnIndex = tabData.columnIndex;

                if (columnIndex === 0) {// 第一列
                    if (rowIndex === 0) {// 第一列第一行
                        return {
                            // 合并到倒数第二行
                            rowspan: this.tableData.length - 1,
                            colspan: 1
                        };
                    }
                    // 第一列最后一行
                    else if (rowIndex === this.tableData.length - 1) {
                        return {
                            rowspan: 1,
                            // 合并三列
                            colspan: 3
                        };
                    }
                    // 第一列其他行
                    else {
                        return {
                            rowspan: 0,
                            colspan: 0
                        };
                    }
                } else if (columnIndex === 1) { // 第二列
                    // 第1、6行，合并5行
                    if ([0, 5].indexOf(rowIndex) !== -1) {
                        return {
                            rowspan: 5,
                            colspan: 1
                        };
                    }
                    // 第11、16行，合并4行
                    else if ([10, 15].indexOf(rowIndex) !== -1) {
                        return {
                            rowspan: 4,
                            colspan: 1
                        };
                    }
                    // 第14行
                    else if (rowIndex === 14) {
                        return {
                            rowspan: 1,
                            colspan: 1
                        };
                    }
                    // 倒数第二统计行
                    else if (rowIndex === this.tableData.length - 2) {
                        return {
                            rowspan: 1,
                            colspan: 2
                        };
                    } else {
                        return {
                            rowspan: 0,
                            colspan: 0
                        };
                    }
                } else if (columnIndex === 2) {// 第三列
                    // 隐藏最后一行第三列
                    if (rowIndex === this.tableData.length - 1 || rowIndex === this.tableData.length - 2) {
                        return {
                            rowspan: 0,
                            colspan: 0
                        };
                    }
                }
            }
        }
    })
</script>
</body>
</html>